---
title: "quartify"
subtitle: "Transform your R scripts into Quarto documentation"
author: "Damien Dotta"
format:
  revealjs:
    theme: moon
    slide-number: true
    chalkboard: true
    preview-links: auto
    logo: https://raw.githubusercontent.com/ddotta/quartify/main/man/figures/hex_quartify.png
    css: styles.css
    footer: "quartify - From R to Quarto in one click"
    incremental: false
    transition: slide
    background-transition: fade
    highlight-style: github
---

## ğŸ“¦ What is quartify?

::: {.fragment}
An R package that **automatically converts** your R scripts into Quarto documents (.qmd)
:::

::: {.fragment}
ğŸ’¡ **The idea**: Generate HTML documentation from commented R scripts
:::

::: {.fragment}
ğŸ¯ **The goal**: Make your code more readable and shareable
:::

---

## âœ¨ Quarto advantages

::: {.incremental}
- âœ… **Modern system**: Quarto's advanced features (callouts, tabsets, etc.)
- âœ… **Better theming**: 25+ modern HTML themes
- âœ… **Enhanced interactivity**: Observable JS, Shiny, widgets
- âœ… **Scientific publishing**: Citations, bibliographies
- âœ… **Mermaid diagrams**: Built-in flowcharts
- âœ… **Future-proof**: Next-gen successor to R Markdown
:::

---

## ğŸ¯ Use cases

::: {.incremental}
1. **Automatic documentation**
   - Commented scripts â†’ HTML documentation

2. **Code review**
   - Formatted presentation for non-developers

3. **Reproducible analyses**
   - Logical structure preserved
   - Navigation by sections
:::

---

## ğŸš€ Main features

::: {.incremental}
- ğŸ“ **Automatic conversion**: .R â†’ .qmd
- ğŸ“š **Quarto Books**: Generate navigable books automatically
- ğŸ—‚ï¸ **RStudio sections**: `####`, `====`, `----`
- ğŸ’¬ **Comment preservation**
- ğŸ“Š **Code organization** in blocks
- ğŸ¨ **Customizable YAML**: title, author, theme
- ğŸ“‘ **Automatic table of contents** (French support: "Sommaire")
- ğŸŒ **Optional HTML rendering**
- ğŸ­ **25+ Quarto themes**
:::

---

## ğŸ› ï¸ Installation

```r
# Install from GitHub
install.packages("devtools")
devtools::install_github("ddotta/quartify")

# Load the package
library(quartify)
```

---

## ğŸŒ Web version

::: {.callout-tip}
## Try without installation!
**[https://quartify.lab.sspcloud.fr/](https://quartify.lab.sspcloud.fr/)**

- âœ… Upload one or multiple R scripts
- âœ… Select a directory for batch conversion
- âœ… Create Quarto Books automatically
- âœ… Configure options (title, author, theme)
- âœ… Download .qmd, .html or .zip archive
- âœ… No installation required!
:::

---

## ğŸ’» Usage - Shiny interface

### Option 1: Standalone app

```r
library(quartify)
quartify_app()  # Opens in browser
```

::: {.fragment}
**New possibilities:**

- Convert one or multiple files
- Convert an entire directory
- Create Quarto Books with navigation
- Customize output directory
:::

::: {.fragment}
### Option 2: RStudio Add-in

1. Open an R script in RStudio
2. Menu **Addins** â†’ **Convert R Script to Quarto**
3. Configure and click **GENERATE**
:::

---

## ğŸ’» Usage - Command line

### Basic example

```r
# Simple conversion
rtoqmd("my_script.R", "my_document.qmd")

# Conversion without HTML rendering
rtoqmd("my_script.R", "my_document.qmd", 
       render = FALSE)
```

---

## ğŸ’» Customization

```r
rtoqmd("my_script.R", 
       output_file = "my_document.qmd",
       title = "My statistical analysis",
       author = "Your name",
       format = "html",
       theme = "cosmo",              # Quarto theme
       render = TRUE,                # Generate HTML
       output_html_file = "docs/analysis.html",
       open_html = TRUE,             # Open HTML
       number_sections = TRUE)       # Number sections
```

---

## ğŸ“‚ Batch conversion

```r
# Convert all scripts in a directory
rtoqmd_dir("path/to/scripts")

# Create a Quarto Book (enabled by default)
rtoqmd_dir("path/to/scripts",
           create_book = TRUE,
           output_dir = "_book")

# With custom settings
rtoqmd_dir("path/to/scripts", 
           author = "Data Team",
           render = TRUE,
           output_html_dir = "docs/html",
           exclude_pattern = "test_.*\\.R$")
```

---

## ğŸ“ R script format

### Metadata (optional)

```r
# Title : Iris Data Analysis
#
# Author : Jane Doe
#
# Date : 2025-12-08
#
# Description : Explore differences between
# iris species
#
```

---

## ğŸ“ Comment rules

### 1. Code sections (headers)

```r
## Level 2 title ####

### Level 3 title ====

#### Level 4 title ----
```

::: {.callout-note}
At least 4 symbols at the end (`#`, `=` or `-`)
:::

---

## ğŸ“ Comment rules (continued)

### 2. Regular comments â†’ Text

```r
# This is a standalone comment
# It becomes text in the Quarto document
```

### 3. Code lines

```r
iris |> filter(Species == "setosa")
```

---

## ğŸ“ Comment rules (continued)

### 4. Inline comments (within code)

```r
iris %>% 
  # This comment stays in the code block
  select(Species)
```

::: {.callout-warning}
Comments with space before `#` stay in code!
:::

---

## ğŸ¨ Callouts

```r
# callout-note - Important Note
# This is the callout content.
# It can span multiple lines.

x <- 1
```

::: {.fragment}
5 types available:

- `note`, `tip`, `warning`, `caution`, `important`
:::

---

## ğŸ“Š Mermaid diagrams

```r
#| mermaid
#| eval: true
flowchart TD
    A[Start] --> B[Process]
    B --> C{Decision}
    C -->|Yes| D[End]
    C -->|No| B
```

::: {.fragment}
Supported types: flowcharts, sequence, classes, states, Gantt...
:::

---

## ğŸ“‘ Tabsets

```r
# tabset

# tab - Summary
# Display statistics

summary(data)

# tab - Structure
# Show structure

str(data)
```

::: {.fragment}
Organize content in interactive tabs
:::

---

## âœ¨ New feature: Quarto Books

::: {.incremental}
- ğŸ“š **Directory conversion** â†’ Navigable Quarto books
- ğŸ—‚ï¸ **Automatic structure**: One chapter per script
- ğŸ“‘ **Built-in navigation**: Sidebar with all chapters
- ğŸ¯ **Enabled by default** with `rtoqmd_dir()`
- ğŸ”§ **Customizable**: Configurable output directory
:::

---

## ğŸ” Code quality

### Integration with styler and lintr

::: {.incremental}
- âœ… **use_styler**: Display formatted code (tidyverse style)
- âœ… **use_lintr**: Identify quality issues
- âœ… **apply_styler**: Apply formatting directly (âš ï¸ modifies file)
- ğŸ“‘ **Interactive tabsets**: Original / Formatted / Issues
:::

---

## ğŸ” Code quality example

```r
# Style suggestions in tabs
rtoqmd("my_script.R", "output.qmd", 
       use_styler = TRUE)

# Style + lint
rtoqmd("my_script.R", "output.qmd",
       use_styler = TRUE,
       use_lintr = TRUE)

# Apply directly (âš ï¸ modifies original)
rtoqmd("my_script.R", "output.qmd",
       apply_styler = TRUE)
```

---

## ğŸ¨ Quarto themes

### Light themes
cosmo, flatly, journal, litera, lumen, lux, materia, minty, morph, pulse, quartz, sandstone, simplex, sketchy, spacelab, united, vapor, yeti, zephyr

### Dark themes
darkly, cyborg, slate, solar, superhero

---

## ğŸ¨ Theme example

```r
# Light theme "flatly"
rtoqmd("my_script.R", theme = "flatly")

# Dark theme "darkly"
rtoqmd("my_script.R", theme = "darkly")
```

---

## ğŸ“¤ Generated output

The .qmd document contains:

::: {.incremental}
- âœ… Complete YAML header
- âœ… Header structure from RStudio sections
- âœ… Text explanations from comments
- âœ… Executable or static code blocks
- âœ… Navigable table of contents
:::

---

## ğŸ”„ CI/CD integration

### GitHub Actions

```yaml
- name: Generate documentation
  run: |
    library(quartify)
    rtoqmd_dir("scripts/", render = TRUE, 
               author = "Data Team")
  shell: Rscript {0}

- uses: actions/upload-artifact@v4
  with:
    name: documentation
    path: |
      scripts/**/*.qmd
      scripts/**/*.html
```

---

## ğŸ”„ CI/CD integration (continued)

### GitLab CI

```yaml
generate-docs:
  image: rocker/r-ver:4.5.1
  script:
    - R -e "quartify::rtoqmd_dir('scripts/', 
            render = TRUE, author = 'Data Team')"
  artifacts:
    paths:
      - scripts/**/*.qmd
      - scripts/**/*.html
```

---

## ğŸ¯ Concrete example

::: {.columns}
::: {.column width="50%"}
### R script
```r
## Analysis ####

# Count by species

iris |> 
  count(Species)

### Filtering ====

# Filter on setosa

iris |> 
  filter(Species == "setosa")
```
:::

::: {.column width="50%"}
### Quarto result
- Header "Analysis"
- Text: "Count by species"
- R code block
- Sub-header "Filtering"
- Text: "Filter on setosa"
- R code block
:::
:::

---

## ğŸ’¡ Best practices

::: {.incremental}
1. **Structure** with RStudio sections
2. **Comment** generously (one line = one `#`)
3. **Use metadata** at the beginning of script
4. **Use** callouts for important points
5. **Add** Mermaid diagrams for visualization
6. **Organize** complex content with tabsets
7. **Create Books** for multi-file projects
8. **Check quality** with styler/lintr
9. **Test** different themes to find the best
:::

---

## ğŸ”— Resources

::: {.incremental}
- ğŸ“¦ **GitHub**: [github.com/ddotta/quartify](https://github.com/ddotta/quartify)
- ğŸ“– **Documentation**: [ddotta.github.io/quartify](https://ddotta.github.io/quartify/)
- ğŸŒ **Web version**: [quartify.lab.sspcloud.fr](https://quartify.lab.sspcloud.fr/)
- ğŸ“ **Vignette**: [Getting Started](https://ddotta.github.io/quartify/articles/getting-started.html)
- ğŸ“„ **Examples**: In the package (`inst/examples/`)
:::

---

## ğŸ¯ Key takeaways

::: {.incremental}
1. **Simplicity**: Natural comments â†’ HTML documentation
2. **Power**: All modern Quarto features
3. **Flexibility**: Shiny interface, command line, or web
4. **Scalability**: Quarto Books for complex projects
5. **Quality**: styler/lintr integration for clean code
6. **Automation**: Easy CI/CD integration
7. **Future-proof**: Based on Quarto, the future of R Markdown
:::

---

## ğŸ™ Thank you!

::: {.columns}
::: {.column width="50%"}
### Questions?

ğŸ“§ Contact: GitHub Issues

ğŸŒŸ Don't forget to â­ the project!
:::

::: {.column width="50%"}
![](https://raw.githubusercontent.com/ddotta/quartify/main/man/figures/hex_quartify.png){width=300}
:::
:::

---

## ğŸš€ Live demo

::: {.callout-tip icon=false}
## Let's try together!

1. Visit [quartify.lab.sspcloud.fr](https://quartify.lab.sspcloud.fr/)
2. Upload an example R script
3. Configure title and theme
4. Generate and download the result!
:::
