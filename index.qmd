---
title: "quartify"
subtitle: "Transformez vos scripts R en documentation Quarto"
author: "Damien Dotta"
format:
  revealjs:
    theme: moon
    slide-number: true
    chalkboard: true
    preview-links: auto
    logo: https://raw.githubusercontent.com/ddotta/quartify/main/man/figures/hex_quartify.png
    css: styles.css
    footer: "quartify - De R Ã  Quarto en un clic"
    incremental: false
    transition: slide
    background-transition: fade
    highlight-style: github
---

## ğŸ“¦ Qu'est-ce que quartify ?

::: {.fragment}
Un package R qui **convertit automatiquement** vos scripts R en documents Quarto (.qmd)
:::

::: {.fragment}
ğŸ’¡ **L'idÃ©e** : GÃ©nÃ©rer de la documentation HTML Ã  partir de scripts R commentÃ©s
:::

::: {.fragment}
ğŸ¯ **L'objectif** : Rendre votre code plus lisible et partageable
:::

---

## âœ¨ Avantages de Quarto

::: {.incremental}
- âœ… **SystÃ¨me moderne** : Successeur de R Markdown
- âœ… **25+ thÃ¨mes** : Personnalisation avancÃ©e
- âœ… **InteractivitÃ©** : Observable JS, Shiny, widgets
- âœ… **Publications scientifiques** : Citations, bibliographies
- âœ… **Diagrammes Mermaid** : Flowcharts intÃ©grÃ©s
- âœ… **Future-proof** : DÃ©veloppement actif par Posit
:::

---

## ğŸ¯ Cas d'usage

::: {.incremental}
1. **Documentation automatique**
   - Scripts commentÃ©s â†’ Documentation HTML

2. **Revue de code**
   - PrÃ©sentation formatÃ©e pour non-dÃ©veloppeurs

3. **Analyses reproductibles**
   - Structure logique prÃ©servÃ©e
   - Navigation par sections
:::

---

## ğŸš€ FonctionnalitÃ©s principales

::: {.incremental}
- ğŸ“ **Conversion automatique** : .R â†’ .qmd
- ğŸ“š **Quarto Books** : GÃ©nÃ©ration automatique de livres navigables
- ğŸ—‚ï¸ **Sections RStudio** : `####`, `====`, `----`
- ğŸ’¬ **PrÃ©servation des commentaires**
- ğŸ“Š **Organisation du code** en blocs
- ğŸ¨ **YAML personnalisable** : titre, auteur, thÃ¨me
- ğŸ“‘ **Table des matiÃ¨res** automatique (Sommaire en franÃ§ais)
- ğŸŒ **Rendu HTML** optionnel
- ğŸ­ **25+ thÃ¨mes Quarto**
:::

---

## ğŸ› ï¸ Installation

```r
# Installation depuis GitHub
install.packages("devtools")
devtools::install_github("ddotta/quartify")

# Chargement du package
library(quartify)
```

---

## ğŸŒ Version Web

::: {.callout-tip}
## Essayez sans installation !
**[https://quartify.lab.sspcloud.fr/](https://quartify.lab.sspcloud.fr/)**

- âœ… TÃ©lÃ©versez un ou plusieurs scripts R
- âœ… SÃ©lectionnez un rÃ©pertoire pour conversion par lots
- âœ… CrÃ©ez des Quarto Books automatiquement
- âœ… Configurez les options (titre, auteur, thÃ¨me)
- âœ… TÃ©lÃ©chargez .qmd, .html ou archive .zip
- âœ… Aucune installation nÃ©cessaire !
:::

---

## ğŸ’» Utilisation - Interface Shiny

### Option 1 : Application standalone

```r
library(quartify)
quartify_app()  # Ouvre dans le navigateur
```

::: {.fragment}
**Nouvelles possibilitÃ©s :**

- Convertir un ou plusieurs fichiers
- Convertir un rÃ©pertoire entier
- CrÃ©er des Quarto Books avec navigation
- Personnaliser le rÃ©pertoire de sortie
:::

::: {.fragment}
### Option 2 : Add-in RStudio

1. Ouvrir un script R dans RStudio
2. Menu **Addins** â†’ **Convert R Script to Quarto**
3. Configurer et cliquer sur **GENERATE**
:::

---

## ğŸ’» Utilisation - Ligne de commande

### Exemple basique

```r
# Conversion simple
rtoqmd("mon_script.R", "mon_document.qmd")

# Conversion sans rendu HTML
rtoqmd("mon_script.R", "mon_document.qmd", 
       render = FALSE)
```

---

## ğŸ’» Personnalisation

```r
rtoqmd("mon_script.R", 
       output_file = "mon_document.qmd",
       title = "Mon analyse statistique",
       author = "Votre nom",
       format = "html",
       theme = "cosmo",              # ThÃ¨me Quarto
       render = TRUE,                # GÃ©nÃ©rer HTML
       output_html_file = "docs/analyse.html",
       open_html = TRUE,             # Ouvrir HTML
       number_sections = TRUE)       # NumÃ©roter sections
```

---

## ğŸ“‚ Conversion par lots

```r
# Convertir tous les scripts d'un rÃ©pertoire
rtoqmd_dir("chemin/vers/scripts")

# CrÃ©er un Quarto Book (activÃ© par dÃ©faut)
rtoqmd_dir("chemin/vers/scripts",
           create_book = TRUE,
           output_dir = "_book")

# Avec options personnalisÃ©es
rtoqmd_dir("chemin/vers/scripts", 
           author = "Ã‰quipe Data",
           render = TRUE,
           output_html_dir = "docs/html",
           exclude_pattern = "test_.*\\.R$")
```

---

## ğŸ“ Format du script R

### MÃ©tadonnÃ©es (optionnel)

```r
# Title : Analyse des donnÃ©es Iris
#
# Author : Jane Doe
#
# Date : 2025-12-05
#
# Description : Explorer les diffÃ©rences entre
# les espÃ¨ces d'iris
#
```

---

## ğŸ“ RÃ¨gles de commentaires

### 1. Sections de code (en-tÃªtes)

```r
## Titre niveau 2 ####

### Titre niveau 3 ====

#### Titre niveau 4 ----
```

::: {.callout-note}
Au moins 4 symboles Ã  la fin (`#`, `=` ou `-`)
:::

---

## ğŸ“ RÃ¨gles de commentaires (suite)

### 2. Commentaires rÃ©guliers â†’ Texte

```r
# Ceci est un commentaire autonome
# Il devient du texte dans le document Quarto
```

### 3. Lignes de code

```r
iris |> filter(Species == "setosa")
```

---

## ğŸ“ RÃ¨gles de commentaires (suite)

### 4. Commentaires inline (dans le code)

```r
iris %>% 
  # Ce commentaire reste dans le bloc de code
  select(Species)
```

::: {.callout-warning}
Les commentaires avec espace avant `#` restent dans le code !
:::

---

## ğŸ¨ Callouts

```r
# callout-note - Note importante
# Ceci est le contenu du callout.
# Il peut s'Ã©tendre sur plusieurs lignes.

x <- 1
```

::: {.fragment}
5 types disponibles :

- `note`, `tip`, `warning`, `caution`, `important`
:::

---

## ğŸ“Š Diagrammes Mermaid

```r
#| mermaid
#| eval: true
flowchart TD
    A[DÃ©but] --> B[Traitement]
    B --> C{DÃ©cision}
    C -->|Oui| D[Fin]
    C -->|Non| B
```

::: {.fragment}
Types supportÃ©s : flowcharts, sÃ©quence, classes, Ã©tats, Gantt...
:::

---

## ğŸ“‘ Tabsets

```r
# tabset

# tab - RÃ©sumÃ©
# Afficher les statistiques

summary(data)

# tab - Structure
# Montrer la structure

str(data)
```

::: {.fragment}
Organise le contenu en onglets interactifs
:::

---

## âœ¨ NouveautÃ© : Quarto Books

::: {.incremental}
- ğŸ“š **Conversion de rÃ©pertoires** â†’ Livres Quarto navigables
- ğŸ—‚ï¸ **Structure automatique** : Un chapitre par script
- ğŸ“‘ **Navigation intÃ©grÃ©e** : Sidebar avec tous les chapitres
- ğŸ¯ **ActivÃ© par dÃ©faut** avec `rtoqmd_dir()`
- ğŸ”§ **Personnalisable** : RÃ©pertoire de sortie configurable
:::

---

## ğŸ” QualitÃ© du code

### IntÃ©gration avec styler et lintr

::: {.incremental}
- âœ… **use_styler** : Affiche le code formatÃ© (tidyverse style)
- âœ… **use_lintr** : Identifie les problÃ¨mes de qualitÃ©
- âœ… **apply_styler** : Applique le formatage directement (âš ï¸ modifie le fichier)
- ğŸ“‘ **Tabsets interactifs** : Code original / FormatÃ© / Issues
:::

---

## ğŸ” Exemple qualitÃ© du code

```r
# Suggestions de style dans des onglets
rtoqmd("mon_script.R", "output.qmd", 
       use_styler = TRUE)

# Style + lint
rtoqmd("mon_script.R", "output.qmd",
       use_styler = TRUE,
       use_lintr = TRUE)

# Appliquer directement (âš ï¸ modifie l'original)
rtoqmd("mon_script.R", "output.qmd",
       apply_styler = TRUE)
```

---

## ğŸ¨ ThÃ¨mes Quarto

### ThÃ¨mes clairs
cosmo, flatly, journal, litera, lumen, lux, materia, minty, morph, pulse, quartz, sandstone, simplex, sketchy, spacelab, united, vapor, yeti, zephyr

### ThÃ¨mes sombres
darkly, cyborg, slate, solar, superhero

---

## ğŸ¨ Exemple de thÃ¨me

```r
# ThÃ¨me clair "flatly"
rtoqmd("mon_script.R", theme = "flatly")

# ThÃ¨me sombre "darkly"
rtoqmd("mon_script.R", theme = "darkly")
```

---

## ğŸ“¤ Sortie gÃ©nÃ©rÃ©e

Le document .qmd contient :

::: {.incremental}
- âœ… En-tÃªte YAML complet
- âœ… Structure d'en-tÃªtes depuis sections RStudio
- âœ… Explications textuelles depuis commentaires
- âœ… Blocs de code exÃ©cutables ou statiques
- âœ… Table des matiÃ¨res navigable
:::

---

## ğŸ”„ IntÃ©gration CI/CD

### GitHub Actions

```yaml
- name: GÃ©nÃ©rer documentation
  run: |
    library(quartify)
    rtoqmd_dir("scripts/", render = TRUE, 
               author = "Ã‰quipe Data")
  shell: Rscript {0}

- uses: actions/upload-artifact@v4
  with:
    name: documentation
    path: |
      scripts/**/*.qmd
      scripts/**/*.html
```

---

## ğŸ”„ IntÃ©gration CI/CD (suite)

### GitLab CI

```yaml
generate-docs:
  image: rocker/r-ver:4.5.1
  script:
    - R -e "quartify::rtoqmd_dir('scripts/', 
            render = TRUE, author = 'Ã‰quipe Data')"
  artifacts:
    paths:
      - scripts/**/*.qmd
      - scripts/**/*.html
```

---

## ğŸ¯ Exemple concret

::: {.columns}
::: {.column width="50%"}
### Script R
```r
## Analyse ####

# Compter par espÃ¨ce

iris |> 
  count(Species)

### Filtrage ====

# Filtrer sur setosa

iris |> 
  filter(Species == "setosa")
```
:::

::: {.column width="50%"}
### RÃ©sultat Quarto
- En-tÃªte "Analyse"
- Texte : "Compter par espÃ¨ce"
- Bloc de code R
- Sous-en-tÃªte "Filtrage"
- Texte : "Filtrer sur setosa"
- Bloc de code R
:::
:::

---

## ğŸ’¡ Bonnes pratiques

::: {.incremental}
1. **Structurez** avec des sections RStudio
2. **Commentez** gÃ©nÃ©reusement (une ligne = un `#`)
3. **Utilisez les mÃ©tadonnÃ©es** en dÃ©but de script
4. **Exploitez** les callouts pour les points importants
5. **Ajoutez** des diagrammes Mermaid pour la visualisation
6. **Organisez** le contenu complexe avec des tabsets
7. **CrÃ©ez des Books** pour projets multi-fichiers
8. **VÃ©rifiez la qualitÃ©** avec styler/lintr
9. **Testez** diffÃ©rents thÃ¨mes pour trouver le meilleur
:::

---

## ğŸ”— Ressources

::: {.incremental}
- ğŸ“¦ **GitHub** : [github.com/ddotta/quartify](https://github.com/ddotta/quartify)
- ğŸ“– **Documentation** : [ddotta.github.io/quartify](https://ddotta.github.io/quartify/)
- ğŸŒ **Version web** : [quartify.lab.sspcloud.fr](https://quartify.lab.sspcloud.fr/)
- ğŸ“ **Vignette** : [Getting Started](https://ddotta.github.io/quartify/articles/getting-started.html)
- ğŸ“„ **Exemples** : Dans le package (`inst/examples/`)
:::

---

## ğŸ¯ Points clÃ©s Ã  retenir

::: {.incremental}
1. **SimplicitÃ©** : Commentaires naturels â†’ Documentation HTML
2. **Puissance** : Toutes les fonctionnalitÃ©s modernes de Quarto
3. **FlexibilitÃ©** : Interface Shiny, ligne de commande, ou web
4. **Ã‰volutivitÃ©** : Quarto Books pour projets complexes
5. **QualitÃ©** : IntÃ©gration styler/lintr pour code propre
6. **Automatisation** : IntÃ©gration CI/CD facile
7. **Future-proof** : BasÃ© sur Quarto, l'avenir de R Markdown
:::

---

## ğŸ™ Merci !

::: {.columns}
::: {.column width="50%"}
### Questions ?

ğŸ“§ Contact : GitHub Issues

ğŸŒŸ N'oubliez pas de â­ le projet !
:::

::: {.column width="50%"}
![](https://raw.githubusercontent.com/ddotta/quartify/main/man/figures/hex_quartify.png){width=300}
:::
:::

---

## ğŸš€ DÃ©mo en direct

::: {.callout-tip icon=false}
## Essayons ensemble !

1. Visitez [quartify.lab.sspcloud.fr](https://quartify.lab.sspcloud.fr/)
2. TÃ©lÃ©versez un script R d'exemple
3. Configurez le titre et le thÃ¨me
4. GÃ©nÃ©rez et tÃ©lÃ©chargez le rÃ©sultat !
:::
